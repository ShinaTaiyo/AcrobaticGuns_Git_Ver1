//=====================================================================================================================
//
//２０２５年３月１８日：コンボを実装する[combo.cpp]
//Author:ShinaTaiyo
//
//=====================================================================================================================

//=====================================================================================================================
//インクルード
//=====================================================================================================================
#include "combo.h"
//=====================================================================================================================================================

//=====================================================================================================================
//コンストラクタ
//=====================================================================================================================
CCombo::CCombo(int nPri, bool bUseintPri, CObject::TYPE type, CObject::OBJECTTYPE ObjType) : CObject(nPri,bUseintPri,type,ObjType)
{

}
//=====================================================================================================================================================

//=====================================================================================================================
//デストラクタ
//=====================================================================================================================
CCombo::~CCombo()
{

}
//=====================================================================================================================================================

//=====================================================================================================================
//初期化処理
//=====================================================================================================================
HRESULT CCombo::Init()
{
	m_pComboDisp = CUi::Create(CUi::UITYPE::COMBOTEXT_000, CObject2D::POLYGONTYPE::SENTERROLLING,
		120.0f, 120.0f, 1, false, D3DXVECTOR3(SCREEN_WIDTH - 60.0f, 200.0f, 0.0f), D3DXVECTOR3(0.0f, 0.0f, 0.0f), D3DXVECTOR3(0.0f, 0.0f, 0.0f),
		D3DXCOLOR(1.0f, 1.0f, 1.0f, 1.0f));//コンボ表示の生成
	m_pComboDisp->GetUiCompositeContainer()->Add(DBG_NEW CUIComposite_Numeric(m_pComboDisp, 0, 30.0f, 30.0f));//数字表示機能をつける
	CObject::Init();//オブジェクト初期化処理
	return S_OK;
}
//=====================================================================================================================================================

//=====================================================================================================================
//終了処理
//=====================================================================================================================
void CCombo::Uninit()
{
	CObject::Uninit();//オブジェクト終了処理
}
//=====================================================================================================================================================

//=====================================================================================================================
//更新処理
//=====================================================================================================================
void CCombo::Update()
{
	CObject::Update();//オブジェクト更新処理
}
//=====================================================================================================================================================

//=====================================================================================================================
//描画処理
//=====================================================================================================================
void CCombo::Draw()
{
	CObject::Draw();//オブジェクト描画処理
}
//=====================================================================================================================================================

//=====================================================================================================================
//死亡フラグ設定処理
//=====================================================================================================================
void CCombo::SetDeath()
{
	if (GetUseDeath() == true)
	{//死亡フラグを使用するなら

		if (m_pComboDisp != nullptr)
		{//コンボ表示が存在していたら
			m_pComboDisp->SetUseDeath(true);//コンボ表示の死亡フラグを使用する
			m_pComboDisp->SetDeath();       //コンボ表示の死亡フラグを設定する
			m_pComboDisp = nullptr;         //コンボ表示のポインタを初期化する
		}
	}

	CObject::SetDeath();//オブジェクト死亡フラグ設定処理
}
//=====================================================================================================================================================

//=====================================================================================================================
//生成処理
//=====================================================================================================================
CCombo* CCombo::Create(D3DXVECTOR3 Pos)
{
	CCombo* pCombo = DBG_NEW CCombo();//コンボの生成
	pCombo->Init();                   //コンボ初期化処理
	return pCombo;
}
//=====================================================================================================================================================